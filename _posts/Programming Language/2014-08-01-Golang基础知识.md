---
layout: post
title: Golang基础知识
category: 编程开发
tags: Go
keywords: Go
description: 
---

## Installation

#### Windows[More](https://blog.csdn.net/weixin_41734700/article/details/80489981)

* 下载并安装`https://golang.org/dl/ `
* 配置环境变量:
```
GOARCH - amd64
GOROOT - D:\Softwares\Go\
GOOS   - windows
GOPATH - %USERPROFILE%\go
```

## 语法


#### $GOPATH

go编译后的二进制文件在$GOPATH/bin目录下

#### make

内置函数, 创建数组切片

eg:

```
myMap = make(map[string] PersonInfo, 100) # 个数100
```

#### map

key必须支持==（避免使用浮点型）value不做规范

```
map[key]value
```

## COMMANDS

```
go build name.go
go install . # 编译,生成文件至$GOPATH/bin
go version
go get
```

```
/Users/username/go/src/github.com # mac github目录
```

#### json.Marshal始终解析为{}

Cmd,Body需要大写

```
type StBody struct {
}

type Cmds struct {
	Cmd string `json:"cmd"`
	Body StBody `json:"body"`
}

emptyBody := StBody{}
cmdsJ := Cmds{Cmd : cmdlist, Body : emptyBody }

c, err := json.Marshal(cmdsJ)
if err != nil {
	log.Println("error:", err)
	return nil, err
}

log.Println("converted string:", string(c))

```

## gopm - 包管理工具[More](https://www.jianshu.com/p/a7c3aeb0948d)

## ERROR

#### cannot find package "github.com ..."

run `go get`

#### https fetch failed: Get https://golang.org/x/crypto/scrypt?go-get=1

```
Fetching https://golang.org/x/crypto/scrypt?go-get=1
https fetch failed: Get https://golang.org/x/crypto/scrypt?go-get=1: dial tcp 216.239.37.1:443: connectex: A connection attempt failed because the connected party did not properly respond after a peri
od of time, or established connection failed because connected host has failed to respond.
package golang.org/x/crypto/scrypt: unrecognized import path "golang.org/x/crypto/scrypt" (https fetch: Get https://golang.org/x/crypto/scrypt?go-get=1: dial tcp 216.239.37.1:443: connectex: A connect
ion attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.)
Fetching https://golang.org/x/net/html?go-get=1
```
Solution:

1.
```
cd C:\Users\Administrator\go\src\golang.org\x
git clone https://github.com/golang/crypto.git
```
2. set proxy[More](https://github.com/golang/go/wiki/GoGetProxyConfig)
```
git config --global http.proxy http://127.0.0.1:1087
```

#### cannot find package "github.com/russross/blackfriday/v2"[More](https://blog.csdn.net/ak47000gb/article/details/79561358)

```
package github.com/russross/blackfriday/v2: cannot find package "github.com/russross/blackfriday/v2" in any of:
        D:\Softwares\Go\src\github.com\russross\blackfriday\v2 (from $GOROOT)
        C:\Users\Administrator\go\src\github.com\russross\blackfriday\v2 (from $GOPATH)
```

Solution:
you should start a project with the Go module support before you can use it. This means that the directory where you run go get must have a go.mod file. Otherwise, you're actually running the legacy go get.[More](https://github.com/tdewolff/minify/issues/235)


## Reference