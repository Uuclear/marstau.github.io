---
layout: post
title: MySQL
category: 游戏技术
tags: data　structure／algorithm
keywords: database
description: 
---

##CentOS命令

####CentOS下MySQL忘记root密码[More](http://www.cnblogs.com/sbaicl/articles/3132010.html)

```
#vi /etc/my.cnf
```
在[mysqld]的段中加上一句skp-grant-tables,eg:

```
[mysqld] 
datadir=/var/lib/mysql 
socket=/var/lib/mysql/mysql.sock 
skip-grant-tables 
保存并且退出vi。
```

重启mysql

```
# service mysqld restart
```

登录并修改MySQL的root密码

```
# mysql 
Welcome to the MySQL monitor. Commands end with ; or \g. 
Your MySQL connection id is 3 to server version: 3.23.56 
Type 'help;' or '\h' for help. Type '\c' to clear the buffer. 
mysql> USE mysql ; 
Database changed 
mysql> UPDATE user SET Password = password ( 'new-password' ) WHERE User = 'root' ; 
Query OK, 0 rows affected (0.00 sec) 
Rows matched: 2 Changed: 0 Warnings: 0 
mysql> flush privileges ; 
Query OK, 0 rows affected (0.01 sec) 
mysql> quit
```

将MySQL的登录设置修改回来

```
# vi /etc/my.cfg
```

将刚才在[mysqld]的段中加上的skip-grant-tables删除 
保存并且退出vim

重启mysqld

```
# service mysqld restart
```

####数据库导入导出[More](http://www.centoscn.com/mysql/2014/0529/3046.html)

* 导出

```
命令：mysqldump -u 用户名 -p 数据库名 > 文件名
如果用户名需要密码，则需要在此命令执行后输入一次密码核对；如果数据库用户名不需要密码，则不要加“-p”参数，导入的时候相同。注意输入的用户名需要拥有对应数据库的操作权限，否则无法导出数据。由于是作系统维护和全部数据库的导出，一般我们使用root等超级用户权限。
比如要将abc这个数据库导出为一个文件名为db_abc.sql的数据库文件到当前目录下，则输入下面的命令：
#mysqldump -u root -p abc > db_abc.sql
```

接下来输入root用户的密码即可导出数据库。


* 导入

```
命令：mysql -u 用户名 -p 数据库名 < 文件名
同mysqldump命令一样的用法，各参数的意义同mysqldump。
比如我们要将/root/backup/db_abc.sql这个文件的数据导入到abc数据库中，则使用下面的命令：
#mysql -u root -p abc < /root/backup/db_abc.sql
```

之后输入root用户的密码即可导入。值得一提的是，如果这个数据库本身不存在，则无法导入。也就是说要想导入到一个数据库，至少应该先建立一个空的数据库，然后再导入。

####查看版本

```
#mysql -V //大写
```

####卸载[More](http://linuxhostingsupport.net/blog/rpm-remove-error-specifies-multiple-packages)

先查询mysql的版本

```
#rpm -q --queryformat "%{name}.%{arch}\n" mysql
mysql.i386
mysql.x64_64
```

卸载

```
rpm -e mysql.i386
rpm -e mysql.x86_64
```

####允许远程访问root

```
GRANT ALL PRIVILEGES ON *.* TO root@'%' IDENTIFIED BY 'your paaaword';
```


#####查看权限

某个用户的权限

```
show grants for 'your-username'@'%';  
```

赋予用户对某个数据库的权限

```
grant ALL PRIVILEGES on `database-name`.* to your-name@'%' identified by 'your-password';

ALL PRIVILEGES可替换为 create[,update[,select]]等
```

####
##Reference
