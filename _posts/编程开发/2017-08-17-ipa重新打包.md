---
layout: post
title: ipa重新打包
category: 编程开发
tags: data　structure／algorithm
keywords: 
description: 
---

## 手动签名

```
unzip wx6.3.6.ipa
zip -r appstore.ipa Payload

codesign -f -s "iPhone Distribution: meme (4CX29AH9H2)" --entitlements entitlements.plist Payload/Wechat.app
```

拷贝对应的dist_ad_hoc.mobileprovision到Wechat.app/embedded.mobileprovision中

dylib也要重新签名,不然即使可以正常安装，但会闪退

```
codesign -f -s "iPhone Distribution: meme (4CX29AH9H2)" Payload/Wechat.app/libsubstrate.dylib
```

entitlements.plist内容:

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>application-identifier</key>
	<string>4CX29AH9H2.com.tencent.xin.seiderose</string>
	<key>com.apple.developer.team-identifier</key>
	<string>4CX29AH9H2</string>
	<key>get-task-allow</key>
	<false/>
	<key>keychain-access-groups</key>
	<array>
		<string>4CX29AH9H2.com.tencent.xin.seiderose</string>
	</array>
</dict>
</plist>
```

## 签名工具

```
ios app signer
resign
iModSign
```

## Reference

* <http://www.olinone.com/?p=198>
* <http://kittenyang.com/pokemongocrack/>
* <http://blog.csdn.net/zcrong/article/details/51619381>